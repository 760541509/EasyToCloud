<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yingtongquan.employees.member.mapper.TblMemberShopMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.yingtongquan.employees.member.entity.TblMemberShopPo">
        <id column="id" property="id"/>
        <result column="member_name" property="memberName"/>
        <result column="user_id" property="userId"/>
        <result column="phone" property="phone"/>
        <result column="add_time" property="addTime"/>
        <result column="head_portrait" property="headPortrait"/>
        <result column="shop_id" property="shopId"/>
        <result column="member_id" property="memberId"/>
    </resultMap>


    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, member_name, user_id, phone, add_time, head_portrait, shop_id, member_id
    </sql>
    <insert id="addUserInformation" parameterType="com.yingtongquan.employees.member.pojo.UserInformation"
            useGeneratedKeys="true" keyProperty="id">
        insert into tbl_user (account,password,salt_value,username,date_birth,head_portrait,sex,email,area_id,address,add_time,phone,mac)
        values (#{account},#{password},#{saltValue},#{username},#{dateBirth},#{headPortrait},#{sex},#{email},#{areaId},#{address},#{addTime},#{phone},#{mac})
    </insert>
    <insert id="addShopMember" parameterType="com.yingtongquan.employees.member.entity.TblMemberShopPo">
        insert into tbl_member_shop (member_name,user_id,phone,add_time,shop_id,member_id)
        values (#{memberName},#{userId},#{phone},#{addTime},#{shopId},#{memberId})
    </insert>
    <update id="updateShopMember" parameterType="com.yingtongquan.employees.member.entity.TblMemberShopPo">
        update tbl_member_shop set member_name = #{memberName},phone = #{phone},head_portrait = #{headPortrait},member_id = #{memberId} where id = #{id}
    </update>
    <delete id="deleteShopMember">
        delete from tbl_member_shop where phone = #{account}
    </delete>
    <select id="queryAllShopMember" resultType="com.yingtongquan.employees.member.entity.TblMemberShopPo">
        select * from tbl_member_shop where shop_id = #{shopId}
    </select>
    <select id="queryMember" resultType="java.lang.String">
        select price_name from tbl_member_price_shop where id = #{memberId}
    </select>
    <select id="queryUserInfromation" resultType="com.yingtongquan.employees.staff.pojo.UserInformation">
        select * from tbl_user where account = #{account}
    </select>
    <select id="queryByCondition" resultType="com.yingtongquan.employees.member.entity.TblMemberShopPo">
        select * from tbl_member_shop where phone like concat("%",#{nameAndPhone},"%") or member_name like concat("%",#{nameAndPhone},"%") and shop_id = #{shopId} limit #{pageStart},#{pageEnd}
    </select>


</mapper>
